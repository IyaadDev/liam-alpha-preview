<section>
    <!-- Start: 1 Row 3 Columns -->
    <div class="container">
        <div class="row text-center">
            <div class="col-md-10 col-lg-7" style="height: 100%;">
                <div class="card aos-init aos-animate" data-aos="fade-up" data-aos-delay="150" data-aos-once="true" style="background: rgba(255,255,255,0.6);margin: 1rem!Important;">
                    <div class="card-body text-center" style="border-radius: 5rem;background: #ffffff00;"><img src="../assets/img/logo.webp?h=0722d3247654ad6b5121ce1ebd28d5fc" style="width: 5rem;height: auto;">
                        <h2>Welcome to<span class="sct" style="margin-left: 0.25rem;">School Tool</span>!</h2>
                        <p>Check your timetable‚è∞, Study smarter üß†, list tasks üìÉ and everything else, all in one place üòâ. Welcome to School Tool üìö</p>
                    </div>
                </div>
            </div>
            <div class="col-md-11 col-lg-5 col-xl-5" style="height: 100%;">
                <div class="card aos-init aos-animate" data-aos="fade-up" data-aos-delay="300" data-aos-once="true" style="background: rgba(255,255,255,0.6);margin: 1rem!Important;max-height: 100%;">
                    <div class="card-body text-center" style="border-radius: 5rem;background: #ffffff00;"><a class="weatherwidget-io" href="https://forecast7.com/en/25d2055d27/dubai/" data-label_1="Dubai" data-font="Roboto" data-icons="Climacons Animated" data-mode="Current" data-days="3" data-theme="pure" data-basecolor="rgba(255, 255, 255, 0.06)" style="display: block; position: relative; height: 98px; padding: 0px; overflow: hidden; text-align: left; text-indent: -299rem;">Dubai<iframe id="weatherwidget-io-0" class="weatherwidget-io-frame" title="Weather Widget" scrolling="no" frameborder="0" width="100%" src="https://weatherwidget.io/w/" style="display: block; position: absolute; top: 0px; height: 98px;"></iframe></a>
<script type="text/javascript">
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
</script></div>
                </div>
            </div>
            <div class="col-md-4 col-lg-4" style="height: 100%;">
                <div class="card aos-init aos-animate" data-aos="fade-up" data-aos-delay="450" data-aos-once="true" style="background: rgba(255,255,255,0.6);margin: 1rem!Important;">
                    <div class="card-body text-center" style="border-radius: 5rem;background: #ffffff00;">
                        <h5 class="text-start" style="font-weight: bold;color: var(--bs-link-hover-color);">Now</h5>
                        <h3 class="text-start lesson" style="border-left: 5.4px solid var(--bs-link-color);border-radius: 3px;padding-left: 0.5rem;">None</h3>
                        <h5 class="text-start" style="font-weight: bold;color: var(--bs-form-invalid-border-color);margin-top: 1rem;">Up next</h5>
                        <h3 class="text-start nextPeriod" style="border-left: 5.4px solid var(--bs-link-color);border-radius: 3px;padding-left: 0.5rem;">None</h3>
                        <h5 class="text-start" style="font-weight: bold;color: #006034;margin-top: 1rem;">Afterward</h5>
                        <h3 class="text-start nextPeriod" style="border-left: 5.4px solid var(--bs-link-color);border-radius: 3px;padding-left: 0.5rem;">None</h3><script type="text/javascript">
// Function to get the value of a cookie by its name
function getCookie(cookieName) {
const cookies = document.cookie.split(';');
for (let i = 0; i < cookies.length; i++) {
const cookie = cookies[i].trim();
if (cookie.startsWith(cookieName + '=')) {
    return cookie.substring(cookieName.length + 1);
}
}
return null;
}

// Get the "class" cookie
const classCookie = getCookie('class');

if (classCookie) {
// Split the cookie contents by "-"
const [firstPart, secondPart] = classCookie.split('-');

// Log the first and second parts to the console
console.log('First Part of "class" cookie:', firstPart);
console.log('Second Part of "class" cookie:', secondPart);

// Construct the URL for fetching the JSON file
const jsonURL = `https://cloud.acroford.com/sct/${firstPart}/${secondPart}/timetable.json`;

// Fetch the JSON file from the constructed URL
fetch(jsonURL)
.then(response => {
    if (!response.ok) {
        throw new Error('Network response was not ok');
    }
    return response.json();
})
.then(data => {
    // Log the JSON data to the console
    console.log('JSON Data:', data);

    // Get the current time in 24-hour format (HHMM)
    const currentDate = new Date();
    const hours = currentDate.getHours().toString().padStart(2, '0');
    const minutes = currentDate.getMinutes().toString().padStart(2, '0');
    const currentTime = hours + minutes;

    // Determine the current day (e.g., "monday", "tuesday")
    const daysOfWeek = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
    const currentDayIndex = currentDate.getDay(); // 0 for Sunday, 1 for Monday, and so on
    const currentDay = daysOfWeek[currentDayIndex];

    // Find the corresponding period in the timetable
    let currentPeriod = null;
    let nextPeriod = null;
    let nextNextPeriod = null; // Add this variable
    for (let period in data.timings[currentDay]) {
        const start = data.timings[currentDay][period].start;
        const end = data.timings[currentDay][period].end;
        if (currentTime >= start && currentTime < end) {
            currentPeriod = period;
            // Find the next period
            const nextPeriodIndex = Number(period) + 1;
            if (data.timings[currentDay][nextPeriodIndex]) {
                nextPeriod = nextPeriodIndex.toString();
                // Find the next next period
                const nextNextPeriodIndex = nextPeriodIndex + 1;
                if (data.timings[currentDay][nextNextPeriodIndex]) {
                    nextNextPeriod = nextNextPeriodIndex.toString();
                }
            }
            break; // We found the current period, so exit the loop
        }
    }

    // Log the current time and period to the console
    console.log('Current Time (24-hour format):', currentTime);
    if (currentPeriod !== null) {
        console.log(`Current Period: Period ${currentPeriod}`);
        const currentLesson = data.days[currentDay][currentPeriod - 1][currentPeriod];
        console.log(`Current Lesson: ${currentLesson}`);

        // Display the current period in the h2 element with class .lesson
        const lessonElement = document.querySelector('.lesson');
        if (lessonElement) {
            lessonElement.textContent = `${currentLesson}`;
        }

        // Display the next period in the h2 element with class .nextPeriod
        if (nextPeriod !== null) {
            const nextLesson = data.days[currentDay][nextPeriod - 1][nextPeriod];
            const nextPeriodElement = document.querySelector('.nextPeriod');
            if (nextPeriodElement) {
                nextPeriodElement.textContent = `${nextLesson}`;
            }
        }

        // Display the next next period in the h2 element with class .nextNextPeriod
        if (nextNextPeriod !== null) {
            const nextNextLesson = data.days[currentDay][nextNextPeriod - 1][nextNextPeriod];
            const nextNextPeriodElement = document.querySelector('.nextNextPeriod');
            if (nextNextPeriodElement) {
                nextNextPeriodElement.textContent = `${nextNextLesson}`;
            }
        }
    } else {
        console.log('No class is currently in session.');
    }

    // Log the current day in lowercase
    console.log('Current Day (lowercase):', currentDay);

    // Match the current day with the "days" section and log the schedule
    if (data.days.hasOwnProperty(currentDay)) {
        const schedule = data.days[currentDay];
        console.log('Today\'s Schedule:');
        schedule.forEach(item => {
            const period = Object.keys(item)[0];
            const subject = item[period];
            console.log(`Period ${period}: ${subject}`);
        });
    } else {
        console.log('No schedule available for today.');
    }
})
.catch(error => {
    console.error('There was a problem fetching the JSON:', error);
});
} else {
console.log('The "class" cookie is not set.');
}
</script><a class="btn btn-primary aib" role="button" style="margin-top: 1rem;background: rgb(7, 48, 66)!important;" href="timetable.html">Full Time Table&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-right-short" style="font-size: 27px;">
                                <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                            </svg></a>
                    </div>
                </div>
            </div>
            <div class="col-md-8 col-lg-5" style="height: 100%;">
                <div class="card aos-init aos-animate" data-aos="fade-up" data-aos-delay="600" data-aos-once="true" style="background: rgba(255,255,255,0.6);margin: 1rem!Important;">
                    <div class="card-body text-center" style="border-radius: 5rem;background: #ffffff00;">
                        <h4 class="quote" style="padding: 0.5rem;">If you are out to describe the truth, leave elegance to the tailor.</h4>
                        <div></div><script type="text/javascript">
const authors = ["steve-jobs", "albert-einstein", "mahatma-gandhi", "william-shakespeare"];
const randomAuthor = authors[Math.floor(Math.random() * authors.length)];

const params = new URLSearchParams({
author: randomAuthor,
});

const url = `https://api.quotable.io/random?${params}`;

fetch(url)
.then(response => response.json())
.then(data => {
    const quoteElement = document.querySelector('.quote');
    const authorElement = document.querySelector('.quoteAuthor');
    
    if (quoteElement && authorElement) {
        quoteElement.textContent = data.content;
        authorElement.textContent = data.author;
    } else {
        console.error("Quote or author element not found.");
    }
})
.catch(error => {
    console.error("An error occurred:", error);
});
</script>
                        <p class="quoteAuthor">Albert Einstein</p>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- End: 1 Row 3 Columns -->
</section>